{"ast":null,"code":"import _objectSpread from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from\"react-router-dom\";import SplitData from'../component/function';import ChatBox from'../component/ChatBox';import{connect}from'react-redux';import axios from'axios';var EditDiary=/*#__PURE__*/function(_Component){_inherits(EditDiary,_Component);function EditDiary(){var _getPrototypeOf2;var _this;_classCallCheck(this,EditDiary);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(EditDiary)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={D_id:_this.props.location.Diary.D_id,D_auther:_this.props.location.Diary.D_auther,D_name:_this.props.location.Diary.D_name,D_object:_this.props.location.Diary.D_object};_this.showFile=function(){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var file=document.querySelector('input[type=file]').files[0];var reader=new FileReader();reader.onload=function(event){var obj=_this.state.D_object;obj.push({obj_id:obj.length,type:\"chat\",pos:{x:10,y:10},data:SplitData(event.target.result+\"\\n\")});_this.setState({D_object:obj});};reader.readAsText(file);}else{alert(\"Your browser is too old to support HTML5 File API\");}};return _this;}_createClass(EditDiary,[{key:\"componentWillUpdate\",value:function componentWillUpdate(){var Diary_redux=this.props.valFromStore.Diary;Diary_redux.D_object=this.state.D_object;Diary_redux.D_id=this.state.D_id;Diary_redux.D_name=this.state.D_name;this.props.edite_state.bind(this,Diary_redux);console.log(\"edite_state\",this.state);console.log(\"edite_Redux\",this.props.valFromStore.Diary);}},{key:\"saveDiary\",value:function saveDiary(){//axios\n//this.props.edite_state.bind(this,{Diary:this.state});\n}},{key:\"render\",value:function render(){var _this2=this;var add_textbox=function add_textbox(){var obj=_this2.state.D_object;obj.push({obj_id:obj.length,type:\"text\",pos:{x:10,y:10},data:{Name:\"\",data:\"\"}});_this2.setState({D_object:obj});};var handleChangeD_Name=function handleChangeD_Name(e){_this2.setState({D_id:e.target.value,D_name:e.target.value});};return React.createElement(\"div\",{className:\"card\"},React.createElement(\"div\",{className:\"card-header\"},React.createElement(Link,{to:\"/mainPage\"},\"back\"),React.createElement(\"button\",{className:\"btn btn-danger float-right\",onClick:function onClick(){console.log(\"save\",_this2.state);var Redux_kung=_this2.props.valFromStore;axios.defaults.baseURL='https://us-central1-my-diary-fbs.cloudfunctions.net/app';axios.post('/saveDiary/'+Redux_kung.user.U_name,_objectSpread({},Redux_kung.Diary,{D_id:_this2.state.D_id,D_name:_this2.state.D_name,D_auther:Redux_kung.user.U_name})).then(function(res){console.log(res.data);});}},\"Save\")),React.createElement(\"div\",{className:\"card-body\",style:{\"height\":\"100vh\"}},this.state.D_object.map(function(item,i){return React.createElement(ChatBox,{val:item,key:i});})),React.createElement(\"div\",{className:\"card-footer fixed-bottom\"},React.createElement(\"div\",{className:\"row\"},\"Name\",React.createElement(\"br\",null)),React.createElement(\"div\",{className:\"row\"},React.createElement(\"input\",{type:\"text\",className:\"form-control\",style:{width:\"50%\"},defaultValue:this.state.D_name,onChange:handleChangeD_Name}),React.createElement(\"button\",{className:\"btn btn-primary\",style:{width:\"15%\"},onClick:add_textbox},React.createElement(\"span\",{className:\"fas fa-font\"})),React.createElement(\"button\",{className:\"btn btn-primary\",style:{width:\"15%\"},onClick:function onClick(){return document.getElementById(\"files\").click();}},React.createElement(\"span\",{className:\"fas fa-comment\"}),React.createElement(\"input\",{id:\"files\",type:\"file\",onChange:this.showFile,style:{\"display\":\"none\"}})))));}}]);return EditDiary;}(Component);var mapStateToProps=function mapStateToProps(state){return{valFromStore:state};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{edite_state:function edite_state(val){return dispatch({type:'update_state',payload:{Diary:val}});}};};export default connect(mapStateToProps,mapDispatchToProps)(EditDiary);","map":{"version":3,"sources":["D:/DarkST/code_zone/comeback/nsc/temp1/NSC-chatdiary/src/page/EditDiary.jsx"],"names":["React","Component","Link","SplitData","ChatBox","connect","axios","EditDiary","state","D_id","props","location","Diary","D_auther","D_name","D_object","showFile","window","File","FileReader","FileList","Blob","file","document","querySelector","files","reader","onload","event","obj","push","obj_id","length","type","pos","x","y","data","target","result","setState","readAsText","alert","Diary_redux","valFromStore","edite_state","bind","console","log","add_textbox","Name","handleChangeD_Name","e","value","Redux_kung","defaults","baseURL","post","user","U_name","then","res","map","item","i","width","getElementById","click","mapStateToProps","mapDispatchToProps","dispatch","val","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport SplitData from '../component/function'\r\nimport ChatBox from '../component/ChatBox'\r\nimport {connect} from 'react-redux'\r\nimport axios from 'axios'\r\n\r\nclass EditDiary extends Component {\r\n  state={\r\n    D_id : this.props.location.Diary.D_id,\r\n    D_auther :  this.props.location.Diary.D_auther,\r\n    D_name :this.props.location.Diary.D_name ,\r\n    D_object : this.props.location.Diary.D_object\r\n  };\r\n\r\n  showFile = () => {\r\n    if (window.File && window.FileReader && window.FileList && window.Blob) {\r\n         var file = document.querySelector('input[type=file]').files[0];\r\n         var reader = new FileReader();\r\n\r\n             reader.onload = (event)=> { \r\n              var obj = this.state.D_object;\r\n              obj.push({\r\n                obj_id:obj.length,\r\n                type:\"chat\",\r\n                pos:{\r\n                  x:10,\r\n                  y:10\r\n                },\r\n                data: SplitData(event.target.result+\"\\n\")\r\n              });\r\n              \r\n              this.setState({D_object:obj});\r\n            };\r\n         reader.readAsText(file);\r\n         \r\n   }else {\r\n      alert(\"Your browser is too old to support HTML5 File API\");\r\n   }\r\n\r\n  }\r\n\r\n  componentWillUpdate(){\r\n    const Diary_redux = this.props.valFromStore.Diary;\r\n    Diary_redux.D_object = this.state.D_object;\r\n    Diary_redux.D_id = this.state.D_id;\r\n    Diary_redux.D_name = this.state.D_name;\r\n    \r\n    this.props.edite_state.bind(this, Diary_redux);\r\n    console.log(\"edite_state\",this.state);\r\n    console.log(\"edite_Redux\",this.props.valFromStore.Diary);\r\n  }\r\n\r\n  saveDiary(){ //axios\r\n    //this.props.edite_state.bind(this,{Diary:this.state});\r\n\r\n  }\r\n\r\n\r\n  render() {\r\n    const   add_textbox=()=>{\r\n              var obj = this.state.D_object;\r\n              obj.push({\r\n                obj_id:obj.length,\r\n                type:\"text\",\r\n                pos:{\r\n                  x:10,\r\n                  y:10\r\n                },\r\n                data:{Name:\"\",data:\"\"}\r\n              });\r\n              this.setState({D_object:obj});    \r\n    }\r\n    const handleChangeD_Name=(e)=>{\r\n      this.setState({D_id:e.target.value,D_name:e.target.value});  \r\n    }\r\n\r\n    return (\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <Link to=\"/mainPage\">back</Link>\r\n          <button \r\n            className=\"btn btn-danger float-right\" \r\n            \r\n            onClick={\r\n              ()=>{\r\n                console.log(\"save\",this.state);\r\n                const Redux_kung = this.props.valFromStore;\r\n                axios.defaults.baseURL = 'https://us-central1-my-diary-fbs.cloudfunctions.net/app';\r\n                axios.post('/saveDiary/'+Redux_kung.user.U_name,{\r\n                  ...Redux_kung.Diary , D_id: this.state.D_id ,D_name:this.state.D_name,D_auther:Redux_kung.user.U_name\r\n                })\r\n                .then((res)=>{console.log(res.data);})\r\n              }\r\n            } \r\n          > \r\n            Save \r\n          </button>\r\n        </div>\r\n        \r\n\r\n        <div className=\"card-body\" style={{\"height\":\"100vh\"}}> \r\n           {this.state.D_object.map((item,i)=>{return <ChatBox val={item} key={i} />})}\r\n        </div>\r\n\r\n        <div className=\"card-footer fixed-bottom\" >\r\n          <div className=\"row\">\r\n            Name<br/>\r\n          </div>\r\n          <div className=\"row\">\r\n            <input type=\"text\" className=\"form-control\" style={{width:\"50%\"}} defaultValue={this.state.D_name} onChange={handleChangeD_Name}/>\r\n            <button className=\"btn btn-primary\" style={{width:\"15%\"}} onClick={add_textbox}>\r\n              <span className=\"fas fa-font\"/> \r\n            </button>\r\n            <button className=\"btn btn-primary\" style={{width:\"15%\"}} onClick={()=>document.getElementById(\"files\").click()}>\r\n              <span className=\"fas fa-comment\"/> \r\n              <input id=\"files\" type=\"file\" onChange={this.showFile} style={{\"display\":\"none\"}} />\r\n            </button>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state =>{\r\n  return{\r\n    valFromStore : state\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    edite_state:(val)=>{\r\n      return dispatch({type:'update_state',payload:{Diary:val}});\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(EditDiary);"]},"metadata":{},"sourceType":"module"}