{"ast":null,"code":"import _classCallCheck from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import Draggable from'react-draggable';import{connect}from'react-redux';var ChatBox=/*#__PURE__*/function(_Component){_inherits(ChatBox,_Component);function ChatBox(){var _getPrototypeOf2;var _this;_classCallCheck(this,ChatBox);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ChatBox)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={activeDrags:0,controlledPosition:{x:_this.props.val.pos.x,y:_this.props.val.pos.y},id:_this.props.val.obj_id,raw_data:_this.props.val.data,Di:_this.props.valFromStore};_this.onStart=function(){_this.setState({activeDrags:++_this.state.activeDrags});};_this.onStop=function(){_this.setState({activeDrags:--_this.state.activeDrags});};_this.onControlledDrag=function(e,position){var x=position.x,y=position.y;//console.log(this.props.valFromStore);\n//console.log(this.state);\nvar Diary=_this.state.Di;var D_Before=Diary.D_object[_this.state.id];console.log(\"ChatBox_Redux\",Diary);//console.log(\"Diary Before\",D_Before,this.state.id);\nD_Before.pos={x:x,y:y};Diary.D_object[_this.state.id]=D_Before;_this.props.edite_state.bind(_assertThisInitialized(_this),{Diary:Diary});_this.setState({controlledPosition:{x:x,y:y}});//Diary = this.props.valFromStore;\n//console.log(\"Redux-Update\",Diary);\n//D_Before = Diary.D_object[this.state.id];\n//console.log(\"Diary Before2\",D_Before,this.state.id);   \n};return _this;}_createClass(ChatBox,[{key:\"componentDidMount\",value:function componentDidMount(){console.log(this.state);console.log(\"ChatBox-Redux-Update\",this.state.Di);}},{key:\"render\",value:function render(){var _this2=this;var onChangeTextBox=function onChangeTextBox(e){var Diary=_this2.state.Di;var D_Before=Diary.D_object[_this2.state.id];D_Before.data={Name:\"\",data:e.target.value};Diary.D_object[_this2.state.id]=D_Before;_this2.props.edite_state.bind(_this2,{Diary:Diary});_this2.setState({raw_data:D_Before});console.log(_this2.props.valFromStore);};var dragHandlers={onStart:this.onStart,onStop:this.onStop};var controlledPosition=this.state.controlledPosition;return React.createElement(Draggable,Object.assign({bounds:\"parent\",position:controlledPosition,onDrag:this.onControlledDrag,cancel:\"ul\"},dragHandlers),React.createElement(\"div\",{className:\"card\",style:this.props.val.type=='chat'?{\"height\":\"200px\",\"width\":\"200px\"}:{width:\"230px\"}},this.props.val.type=='chat'?React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"card-header bg-primary text-white\",style:{\"width\":\"200px\"}},this.state.raw_data.Name),React.createElement(\"ul\",{className:\"card-body overflow-auto\"},this.state.raw_data.data.map(function(chat,i){return React.createElement(\"div\",{className:_this2.state.raw_data.Name===chat.person?\"float-left\":\"float-right\",style:{\"font-size\":\"10px\",paddingTop:\"5px\",border:\"1px solid #313BB6\",width:\"100px\",borderRadius:\"3px\"}},chat.context);}))):React.createElement(\"ul\",{className:\"card-body\"},React.createElement(\"textarea\",{className:\"form-control\",rows:\"5\",cols:\"35\",onChange:onChangeTextBox},this.state.raw_data.data))));}}]);return ChatBox;}(Component);var mapStateToProps=function mapStateToProps(state){return{valFromStore:state.Diary};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{edite_state:function edite_state(val){return dispatch({type:'update_state',payload:val});}};};export default connect(mapStateToProps,mapDispatchToProps)(ChatBox);","map":{"version":3,"sources":["D:/DarkST/code_zone/comeback/nsc/temp1/NSC-chatdiary/src/component/ChatBox.jsx"],"names":["React","Component","Draggable","connect","ChatBox","state","activeDrags","controlledPosition","x","props","val","pos","y","id","obj_id","raw_data","data","Di","valFromStore","onStart","setState","onStop","onControlledDrag","e","position","Diary","D_Before","D_object","console","log","edite_state","bind","onChangeTextBox","Name","target","value","dragHandlers","type","width","map","chat","i","person","paddingTop","border","borderRadius","context","mapStateToProps","mapDispatchToProps","dispatch","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Draggable from 'react-draggable'\r\nimport {connect} from 'react-redux'\r\n\r\nclass ChatBox extends Component {\r\n  state = {\r\n    activeDrags: 0,\r\n    controlledPosition: {\r\n      x: this.props.val.pos.x,\r\n      y: this.props.val.pos.y\r\n    },\r\n    id: this.props.val.obj_id,\r\n    raw_data: this.props.val.data,\r\n    Di : this.props.valFromStore\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log(this.state);\r\n    console.log(\"ChatBox-Redux-Update\",this.state.Di);\r\n  }\r\n\r\n  onStart = () => {\r\n    this.setState({ activeDrags: ++this.state.activeDrags });\r\n  };\r\n\r\n  onStop = () => {\r\n    this.setState({ activeDrags: --this.state.activeDrags });\r\n  };\r\n\r\n  onControlledDrag = (e, position) => {\r\n    const { x, y } = position;\r\n\r\n    \r\n    //console.log(this.props.valFromStore);\r\n    //console.log(this.state);\r\n    \r\n    const Diary = this.state.Di;\r\n    let D_Before = Diary.D_object[this.state.id];\r\n    \r\n    console.log(\"ChatBox_Redux\",Diary);\r\n    //console.log(\"Diary Before\",D_Before,this.state.id);\r\n    \r\n    D_Before.pos = {x:x,y:y};\r\n    Diary.D_object[this.state.id] = D_Before;\r\n\r\n    this.props.edite_state.bind(this,{Diary: Diary });\r\n\r\n    this.setState({ controlledPosition: { x, y } });\r\n\r\n    //Diary = this.props.valFromStore;\r\n    //console.log(\"Redux-Update\",Diary);\r\n    //D_Before = Diary.D_object[this.state.id];\r\n    //console.log(\"Diary Before2\",D_Before,this.state.id);   \r\n\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    const onChangeTextBox= (e)=>{\r\n    \r\n      const Diary = this.state.Di;\r\n  \r\n      let D_Before = Diary.D_object[this.state.id];\r\n      D_Before.data = {Name:\"\",data:e.target.value};\r\n      Diary.D_object[this.state.id] = D_Before;\r\n  \r\n      this.props.edite_state.bind(this,{Diary: Diary });\r\n      this.setState({raw_data:D_Before});\r\n      console.log(this.props.valFromStore);\r\n    }\r\n\r\n    const dragHandlers = { onStart: this.onStart, onStop: this.onStop };\r\n    const { controlledPosition } = this.state;\r\n\r\n    return (\r\n      <Draggable bounds=\"parent\" position={controlledPosition} onDrag={this.onControlledDrag} cancel=\"ul\" {...dragHandlers}>\r\n        <div className=\"card\" style={ (this.props.val.type=='chat')?{ \"height\": \"200px\", \"width\": \"200px\" }:{width:\"230px\"} }>\r\n          {\r\n            (this.props.val.type=='chat')?\r\n              <>\r\n              <div className=\"card-header bg-primary text-white\" style={{ \"width\": \"200px\" }}>\r\n                {this.state.raw_data.Name}\r\n              </div>\r\n            \r\n              <ul className=\"card-body overflow-auto\">\r\n                {this.state.raw_data.data.map((chat, i) => {\r\n                  return (\r\n                    <div className={(this.state.raw_data.Name === chat.person) ? \"float-left\" : \"float-right\"}\r\n                      style={{ \"font-size\": \"10px\", paddingTop: \"5px\", border: \"1px solid #313BB6\", width: \"100px\", borderRadius: \"3px\" }}>\r\n                      {chat.context}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </ul>\r\n              </>\r\n              :\r\n              <ul className=\"card-body\">\r\n                <textarea className=\"form-control\" rows = \"5\" cols = \"35\" onChange={onChangeTextBox}>\r\n                  {this.state.raw_data.data}\r\n                </textarea>\r\n              </ul>\r\n          }\r\n        </div>\r\n      </Draggable>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state =>{\r\n  return{\r\n    valFromStore : state.Diary\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    edite_state:(val)=>{\r\n      return dispatch({type:'update_state',payload:val});\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(ChatBox);"]},"metadata":{},"sourceType":"module"}