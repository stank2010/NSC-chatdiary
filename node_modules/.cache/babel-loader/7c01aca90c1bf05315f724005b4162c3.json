{"ast":null,"code":"var _jsxFileName = \"D:\\\\DarkST\\\\code_zone\\\\comeback\\\\nsc\\\\temp1\\\\NSC-chatdiary\\\\src\\\\component\\\\ChatBox.jsx\";\nimport React, { Component } from 'react';\nimport Draggable from 'react-draggable';\nimport { connect } from 'react-redux';\n\nclass ChatBox extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      activeDrags: 0,\n      controlledPosition: {\n        x: this.props.val.pos.x,\n        y: this.props.val.pos.y\n      },\n      id: this.props.val.obj_id,\n      raw_data: this.props.val.data,\n      Di: this.props.valFromStore\n    };\n\n    this.onStart = () => {\n      this.setState({\n        activeDrags: ++this.state.activeDrags\n      });\n    };\n\n    this.onStop = () => {\n      this.setState({\n        activeDrags: --this.state.activeDrags\n      });\n    };\n\n    this.onControlledDrag = (e, position) => {\n      const x = position.x,\n            y = position.y; //console.log(this.props.valFromStore);\n      //console.log(this.state);\n\n      const Diary = this.state.Di;\n      let D_Before = Diary.D_object[this.state.id];\n      console.log(\"ChatBox_Redux\", Diary); //console.log(\"Diary Before\",D_Before,this.state.id);\n\n      D_Before.pos = {\n        x: x,\n        y: y\n      };\n      Diary.D_object[this.state.id] = D_Before;\n      this.props.edite_state.bind(this, {\n        Diary: Diary\n      });\n      this.setState({\n        controlledPosition: {\n          x,\n          y\n        }\n      }); //Diary = this.props.valFromStore;\n      //console.log(\"Redux-Update\",Diary);\n      //D_Before = Diary.D_object[this.state.id];\n      //console.log(\"Diary Before2\",D_Before,this.state.id);   \n    };\n  }\n\n  componentDidMount() {\n    console.log(this.state);\n    console.log(\"ChatBox-Redux-Update\", this.state.Di);\n  }\n\n  onChangeTextBox(e) {\n    console.log(this.state);\n    const Diary = this.state.Di;\n    let D_Before = Diary.D_object[this.state.id];\n    D_Before.data = {\n      Name: \"\",\n      data: e.target.value\n    };\n    Diary.D_object[this.state.id] = D_Before;\n    this.props.edite_state.bind(this, {\n      Diary: Diary\n    });\n    this.setState({\n      raw_data: D_Before\n    });\n  }\n\n  render() {\n    const dragHandlers = {\n      onStart: this.onStart,\n      onStop: this.onStop\n    };\n    const controlledPosition = this.state.controlledPosition;\n    return React.createElement(Draggable, Object.assign({\n      bounds: \"parent\",\n      position: controlledPosition,\n      onDrag: this.onControlledDrag,\n      cancel: \"ul\"\n    }, dragHandlers, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"card\",\n      style: this.props.type == 'chat' ? {\n        \"height\": \"200px\",\n        \"width\": \"200px\"\n      } : {\n        width: \"230px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, this.props.type == 'chat' ? React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"card-header bg-primary text-white\",\n      style: {\n        \"width\": \"200px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, this.state.raw_data.Name), React.createElement(\"ul\", {\n      className: \"card-body overflow-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, this.state.raw_data.data.map((chat, i) => {\n      return React.createElement(\"div\", {\n        className: this.state.raw_data.Name === chat.person ? \"float-left\" : \"float-right\",\n        style: {\n          \"font-size\": \"10px\",\n          paddingTop: \"5px\",\n          border: \"1px solid #313BB6\",\n          width: \"100px\",\n          borderRadius: \"3px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, chat.context);\n    }))) : React.createElement(\"ul\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      className: \"form-control\",\n      rows: \"5\",\n      cols: \"35\",\n      onChange: this.onChangeTextBox,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.state.raw_data.data))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    valFromStore: state.Diary\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    edite_state: val => {\n      return dispatch({\n        type: 'update_state',\n        payload: val\n      });\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatBox);","map":{"version":3,"sources":["D:/DarkST/code_zone/comeback/nsc/temp1/NSC-chatdiary/src/component/ChatBox.jsx"],"names":["React","Component","Draggable","connect","ChatBox","state","activeDrags","controlledPosition","x","props","val","pos","y","id","obj_id","raw_data","data","Di","valFromStore","onStart","setState","onStop","onControlledDrag","e","position","Diary","D_Before","D_object","console","log","edite_state","bind","componentDidMount","onChangeTextBox","Name","target","value","render","dragHandlers","type","width","map","chat","i","person","paddingTop","border","borderRadius","context","mapStateToProps","mapDispatchToProps","dispatch","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Draggable from 'react-draggable'\r\nimport {connect} from 'react-redux'\r\n\r\nclass ChatBox extends Component {\r\n  state = {\r\n    activeDrags: 0,\r\n    controlledPosition: {\r\n      x: this.props.val.pos.x,\r\n      y: this.props.val.pos.y\r\n    },\r\n    id: this.props.val.obj_id,\r\n    raw_data: this.props.val.data,\r\n    Di : this.props.valFromStore\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log(this.state);\r\n    console.log(\"ChatBox-Redux-Update\",this.state.Di);\r\n  }\r\n\r\n  onStart = () => {\r\n    this.setState({ activeDrags: ++this.state.activeDrags });\r\n  };\r\n\r\n  onStop = () => {\r\n    this.setState({ activeDrags: --this.state.activeDrags });\r\n  };\r\n\r\n  onControlledDrag = (e, position) => {\r\n    const { x, y } = position;\r\n\r\n    \r\n    //console.log(this.props.valFromStore);\r\n    //console.log(this.state);\r\n    \r\n    const Diary = this.state.Di;\r\n    let D_Before = Diary.D_object[this.state.id];\r\n    \r\n    console.log(\"ChatBox_Redux\",Diary);\r\n    //console.log(\"Diary Before\",D_Before,this.state.id);\r\n    \r\n    D_Before.pos = {x:x,y:y};\r\n    Diary.D_object[this.state.id] = D_Before;\r\n\r\n    this.props.edite_state.bind(this,{Diary: Diary });\r\n\r\n    this.setState({ controlledPosition: { x, y } });\r\n\r\n    //Diary = this.props.valFromStore;\r\n    //console.log(\"Redux-Update\",Diary);\r\n    //D_Before = Diary.D_object[this.state.id];\r\n    //console.log(\"Diary Before2\",D_Before,this.state.id);   \r\n\r\n  }\r\n\r\n  onChangeTextBox(e){\r\n    console.log(this.state);\r\n    const Diary = this.state.Di;\r\n    let D_Before = Diary.D_object[this.state.id];\r\n    D_Before.data = {Name:\"\",data:e.target.value};\r\n    Diary.D_object[this.state.id] = D_Before;\r\n    this.props.edite_state.bind(this,{Diary: Diary });\r\n    this.setState({raw_data:D_Before});\r\n  }\r\n\r\n\r\n  render() {\r\n    const dragHandlers = { onStart: this.onStart, onStop: this.onStop };\r\n    const { controlledPosition } = this.state;\r\n\r\n    return (\r\n      <Draggable bounds=\"parent\" position={controlledPosition} onDrag={this.onControlledDrag} cancel=\"ul\" {...dragHandlers}>\r\n        <div className=\"card\" style={ (this.props.type=='chat')?{ \"height\": \"200px\", \"width\": \"200px\" }:{width:\"230px\"} }>\r\n          {\r\n            (this.props.type=='chat')?\r\n              <>\r\n              <div className=\"card-header bg-primary text-white\" style={{ \"width\": \"200px\" }}>\r\n                {this.state.raw_data.Name}\r\n              </div>\r\n            \r\n              <ul className=\"card-body overflow-auto\">\r\n                {this.state.raw_data.data.map((chat, i) => {\r\n                  return (\r\n                    <div className={(this.state.raw_data.Name === chat.person) ? \"float-left\" : \"float-right\"}\r\n                      style={{ \"font-size\": \"10px\", paddingTop: \"5px\", border: \"1px solid #313BB6\", width: \"100px\", borderRadius: \"3px\" }}>\r\n                      {chat.context}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </ul>\r\n              </>\r\n              :\r\n              <ul className=\"card-body\">\r\n                <textarea className=\"form-control\" rows = \"5\" cols = \"35\" onChange={this.onChangeTextBox}>\r\n                  {this.state.raw_data.data}\r\n                </textarea>\r\n              </ul>\r\n          }\r\n        </div>\r\n      </Draggable>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state =>{\r\n  return{\r\n    valFromStore : state.Diary\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    edite_state:(val)=>{\r\n      return dispatch({type:'update_state',payload:val});\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(ChatBox);"]},"metadata":{},"sourceType":"module"}